const program = require("commander");
const fs = require("fs");
const changeCase = require("change-case");
const pluralize = require("pluralize");
const ora = require("ora");
const spinner = new ora({
  text: "Creating your module..",
  spinner: process.argv[2]
});

async function createController(newModuleBaseDir, lowerCaseName, upperCaseName, urlName, sentenceCaseName) {
  await fs.mkdirSync(newModuleBaseDir + "/controllers");
  let controllerFileData =
    "InVzZSBzdHJpY3QiOw0KaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAiLi4vLi4vLi4vbGlicy9sb2dnZXIiOw0KaW1wb3J0IHVwcGVyY2FzZV9uYW1lIGZyb20gIi4uL21vZGVscyI7DQoNCi8vIGltcG9ydCBvdGhlciBuZWVkZWQgbW9kdWxlcyBoZXJlDQoNCmV4cG9ydCBjb25zdCBnZXRBbGx1cHBlcmNhc2VfbmFtZV9wbHVyYWwgPSAocmVxLCByZXMsIG5leHQpID0+IHsNCiAgbG9nZ2VyLmluZm8oIlJlcXVlc3QgQm9keSA9PT0+IiwgcmVxLmJvZHkpOw0KDQogIHRyeSB7DQogICAgbGV0IHF1ZXJ5U3BlYyA9IHsNCiAgICAgIHN0YXR1czogIkFjdGl2ZSINCiAgICB9Ow0KDQogICAgLy8gQWNjZXB0IG9ubHkgcXVlcnkgcGFyYW1ldGVycyB0aGF0IGFyZSBkZWZpbmVkIGluIHRoZSBzY2hlbWENCg0KICAgIGZvciAobGV0IHByb3BlcnR5IGluIHVwcGVyY2FzZV9uYW1lLnNjaGVtYS5vYmopIHsNCiAgICAgIGlmICh1cHBlcmNhc2VfbmFtZS5zY2hlbWEub2JqLmhhc093blByb3BlcnR5KHByb3BlcnR5KSAmJiBwcm9wZXJ0eSBpbiByZXEucXVlcnkpIHsNCiAgICAgICAgcXVlcnlTcGVjW3Byb3BlcnR5XSA9IHJlcS5xdWVyeVtwcm9wZXJ0eV07DQogICAgICB9DQogICAgfQ0KDQogICAgLy8gRm9yIG90aGVyIHR5cGUgb2YgcXVlcmllcyB3cml0ZSB0aGVtIGhlcmUNCg0KICAgIC8vIEJ1aWxkIHRoZSBxdWVyeQ0KDQogICAgbGV0IHF1ZXJ5ID0gdXBwZXJjYXNlX25hbWUuZmluZChxdWVyeVNwZWMpOw0KDQogICAgaWYgKCJzb3J0X2J5IiBpbiByZXEucXVlcnkpIHsNCiAgICAgIGxldCBwYXJhbXMgPSByZXEucXVlcnkuc29ydF9ieS5zcGxpdCgiLiIpOw0KICAgICAgbGV0IHNvcnR5QnkgPSBwYXJhbXNbMF07DQoNCiAgICAgIGlmICh1cHBlcmNhc2VfbmFtZS5zY2hlbWEub2JqLmhhc093blByb3BlcnR5KHNvcnR5QnkpKSB7DQogICAgICAgIGxldCBjb25kaXRpb24gPSB7fTsNCiAgICAgICAgY29uZGl0aW9uW3NvcnR5QnldID0gMTsNCiAgICAgICAgaWYgKHBhcmFtcy5sZW5ndGggPiAxICYmIHBhcmFtc1sxXS50b0xvd2VyQ2FzZSgpID09ICJhc2MiKSBjb25kaXRpb25bc29ydHlCeV0gPSAtMTsNCg0KICAgICAgICBxdWVyeS5zb3J0KHBhcmFtcyk7DQogICAgICB9DQogICAgfQ0KDQogICAgLy8gQWRkIHBhZ2luYXRpb24NCiAgICBpZiAoInBhZ2UiIGluIHJlcS5xdWVyeSkgew0KICAgICAgbGV0IGxpbWl0ID0gMTA7DQogICAgICBpZiAoImxpbWl0IiBpbiByZXEucXVlcnkpIGxpbWl0ID0gcmVxLnF1ZXJ5LmxpbWl0Ow0KICAgICAgcXVlcnkubGltaXQobGltaXQpLnNraXAoKHJlcS5xdWVyeS5wYWdlIC0gMSkgKiBsaW1pdCk7DQogICAgfQ0KDQogICAgLy8gZXhlY3V0ZSBxdWVyeSBhbmQgY291bnQgb3BlcmF0aW9uDQogICAgUHJvbWlzZS5hbGwoW3VwcGVyY2FzZV9uYW1lLmNvdW50KHF1ZXJ5U3BlYyksIHF1ZXJ5LmV4ZWMoKV0pDQogICAgICAudGhlbihmdW5jdGlvbihyZXN1bHRzKSB7DQogICAgICAgIGxldCBjb3VudCA9IHJlc3VsdHNbMF07DQogICAgICAgIGxldCBkYXRhID0gcmVzdWx0c1sxXTsNCiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsNCiAgICAgICAgICBzdWNjZXNzOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6ICJBbGwgc2VudGVjZWNhc2VfbmFtZV9wbHVyYWwgZmV0Y2hlZCBzdWNjZXNzZnVsbHkhIiwNCiAgICAgICAgICBkYXRhOiBkYXRhLA0KICAgICAgICAgIG1ldGE6IHsgY291bnQ6IGNvdW50IH0NCiAgICAgICAgfSk7DQogICAgICB9KQ0KICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7DQogICAgICAgIGxvZ2dlci5lcnJvcigiRXJyb3IgaW50byB1cHBlcmNhc2VfbmFtZS5nZXRBbGx1cHBlcmNhc2VfbmFtZV9wbHVyYWwoKSBQcm9taXNlLmNhdGNoKGVycm9yKT09PT4iLCBlcnJvci5tZXNzYWdlKTsNCiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAxKS5qc29uKHsNCiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwNCiAgICAgICAgICBtZXNzYWdlOiAiRXJyb3IgaW4gZmV0Y2hpbmcgc2VudGVjZWNhc2VfbmFtZV9wbHVyYWwgIiArIGVycm9yLm1lc3NhZ2UsDQogICAgICAgICAgZXJyb3I6IGVycm9yDQogICAgICAgIH0pOw0KICAgICAgfSk7DQogIH0gY2F0Y2ggKGUpIHsNCiAgICBsb2dnZXIuZXJyb3IoIkVycm9yIGludG8gdXBwZXJjYXNlX25hbWUuZ2V0QWxsdXBwZXJjYXNlX25hbWVfcGx1cmFsKGNhdGNoKT09PT4iLCBlKTsNCiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDEpLmpzb24oew0KICAgICAgc3VjY2VzczogZmFsc2UsDQogICAgICBtZXNzYWdlOiAiU29tZXRoaW5nIHdlbnQgd3JvbmcsIFRyeSBBZ2FpbiIsDQogICAgICBlcnJvcjogZQ0KICAgIH0pOw0KICB9DQp9Ow0KDQpleHBvcnQgY29uc3QgYWRkTmV3dXBwZXJjYXNlX25hbWUgPSAocmVxLCByZXMsIG5leHQpID0+IHsNCiAgbG9nZ2VyLmluZm8oIlJlcXVlc3QgYm9keSA9PT0+IiwgcmVxLmJvZHkpOw0KICB0cnkgew0KICAgIGxldCBpbnB1dCA9IHt9Ow0KDQogICAgLy8gb25seSBhY2NlcHRzIGlucHV0IGZpZWxkcyBkZWZpbmVkIGluIHNjaGVtYS4gaWdub3JlIG90aGVycw0KICAgIGZvciAobGV0IHByb3BlcnR5IGluIHVwcGVyY2FzZV9uYW1lLnNjaGVtYS5vYmopIHsNCiAgICAgIGlmICh1cHBlcmNhc2VfbmFtZS5zY2hlbWEub2JqLmhhc093blByb3BlcnR5KHByb3BlcnR5KSAmJiBwcm9wZXJ0eSBpbiByZXEuYm9keSkgew0KICAgICAgICBpbnB1dFtwcm9wZXJ0eV0gPSByZXEuYm9keVtwcm9wZXJ0eV07DQogICAgICB9DQogICAgfQ0KDQogICAgaWYgKE9iamVjdC5rZXlzKGlucHV0KS5sZW5ndGggPT0gMCkgew0KICAgICAgbGV0IHBhcmFtRXJyb3IgPSBuZXcgRXJyb3IoIk5vIGlucHV0IGZpZWxkcyBwcm92aWRlZCIpOw0KICAgICAgbG9nZ2VyLmVycm9yKCJFcnJvciBpbnRvIHVwcGVyY2FzZV9uYW1lLmNyZWF0ZXVwcGVyY2FzZV9uYW1lKCk9PT0+IiwgcGFyYW1FcnJvcik7DQogICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDEpLmpzb24oew0KICAgICAgICBzdWNjZXNzOiB0cnVlLA0KICAgICAgICBtZXNzYWdlOiBwYXJhbUVycm9yLm1lc3NhZ2UsDQogICAgICAgIGVycm9yOiBwYXJhbUVycm9yDQogICAgICB9KTsNCiAgICB9DQoNCiAgICB1cHBlcmNhc2VfbmFtZS5jcmVhdGUoaW5wdXQsIGZ1bmN0aW9uKGVycm9yLCBkYXRhKSB7DQogICAgICBpZiAoZXJyb3IpIHsNCiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAxKS5qc29uKHsNCiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwNCiAgICAgICAgICBtZXNzYWdlOiAiRXJyb3IgaW4gY3JlYXRpbmcgc2VudGVjZWNhc2VfbmFtZSIgKyBlcnJvci5tZXNzYWdlLA0KICAgICAgICAgIGVycm9yOiBlcnJvcg0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7DQogICAgICAgIHN1Y2Nlc3M6IHRydWUsDQogICAgICAgIG1lc3NhZ2U6ICJOZXcgc2VudGVjZWNhc2VfbmFtZSBjcmVhdGVkIHN1Y2Nlc3NmdWxseSEiLA0KICAgICAgICBkYXRhOiBkYXRhDQogICAgICB9KTsNCiAgICB9KTsNCiAgfSBjYXRjaCAoZSkgew0KICAgIGxvZ2dlci5lcnJvcigiRXJyb3IgaW50byB1cHBlcmNhc2VfbmFtZS5hZGROZXd1cHBlcmNhc2VfbmFtZShjYXRjaCk9PT0+IiwgZSk7DQogICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAxKS5qc29uKHsNCiAgICAgIHN1Y2Nlc3M6IGZhbHNlLA0KICAgICAgbWVzc2FnZTogIlNvbWV0aGluZyB3ZW50IHdyb25nIiwNCiAgICAgIGVycm9yOiBlDQogICAgfSk7DQogIH0NCn07DQoNCmV4cG9ydCBjb25zdCBnZXR1cHBlcmNhc2VfbmFtZSA9IChyZXEsIHJlcywgbmV4dCkgPT4gew0KICBsb2dnZXIuaW5mbygiUmVxdWVzdCBRdWVyeSBhbmQgcGFyYW1ldGVycyAgPT09PiIsIHJlcS5xdWVyeSwgcmVxLnBhcmFtcyk7DQogIHRyeSB7DQogICAgdXBwZXJjYXNlX25hbWUuZmluZE9uZSh7IF9pZDogcmVxLnBhcmFtcy5faWQsIHN0YXR1czogIkFjdGl2ZSIgfSwgZnVuY3Rpb24oZXJyb3IsIGRhdGEpIHsNCiAgICAgIGlmIChlcnJvcikgew0KICAgICAgICBsb2dnZXIuZXJyb3IoIkVycm9yIGludG8gZmV0Y2hpbmcgc2VudGVjZWNhc2VfbmFtZSBpbiB1cHBlcmNhc2VfbmFtZS5nZXR1cHBlcmNhc2VfbmFtZShjYikgPT09PiIsIGVycm9yKTsNCiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoZXJyb3Iuc3RhdHVzQ29kZSB8fCA1MDEpLmpzb24oew0KICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLA0KICAgICAgICAgIG1lc3NhZ2U6ICJFcnJvciBpbiBmZXRjaGluZyBzaW5nbGUgc2VudGVjZWNhc2VfbmFtZSBpbmZvcm1hdGlvbiIsDQogICAgICAgICAgZXJyb3I6IGVycm9yDQogICAgICAgIH0pOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbG9nZ2VyLmRhdGEoInJlc3BvbnNlIGZyb20gdXBwZXJjYXNlX25hbWUuZ2V0dXBwZXJjYXNlX25hbWUoY2IpPT09PiIpOw0KICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oew0KICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogIlRoZSBzZW50ZWNlY2FzZV9uYW1lIGluZm9ybWF0aW9uIGhhcyBiZWVuIGZldGNoZWQgc3VjY2Vzc2Z1bGx5IiwNCiAgICAgICAgICBkYXRhOiBkYXRhDQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0pOw0KICB9IGNhdGNoIChlKSB7DQogICAgbG9nZ2VyLmVycm9yKCJFcnJvciBpbnRvIHVwcGVyY2FzZV9uYW1lLmdldHVwcGVyY2FzZV9uYW1lKGNhdGNoKT09PT4iLCBlKTsNCiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDEpLmpzb24oew0KICAgICAgc3VjY2VzczogZmFsc2UsDQogICAgICBtZXNzYWdlOiAiU29tZXRoaW5nIHdlbnQgd3JvbmciLA0KICAgICAgZXJyb3I6IGUNCiAgICB9KTsNCiAgfQ0KfTsNCg0KZXhwb3J0IGNvbnN0IHVwZGF0ZXVwcGVyY2FzZV9uYW1lID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7DQogIGxvZ2dlci5pbmZvKCJSZXF1ZXN0IGJvZHksIHBhcmFtcyA9PT0+IiwgcmVxLmJvZHksIHJlcS5wYXJhbXMpOw0KICB0cnkgew0KICAgIGlmICghcmVxLnBhcmFtcy5faWQpIHsNCiAgICAgIGxldCBwYXJhbUVycm9yID0gbmV3IEVycm9yKCJObyBpZCBwcm92aWRlZCIpOw0KICAgICAgbG9nZ2VyLmVycm9yKCJFcnJvciBpbnRvIHVwcGVyY2FzZV9uYW1lLnVwZGF0ZXVwcGVyY2FzZV9uYW1lKCk9PT0+IiwgcGFyYW1FcnJvcik7DQogICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDEpLmpzb24oew0KICAgICAgICBzdWNjZXNzOiB0cnVlLA0KICAgICAgICBtZXNzYWdlOiBwYXJhbUVycm9yLm1lc3NhZ2UsDQogICAgICAgIGVycm9yOiBwYXJhbUVycm9yDQogICAgICB9KTsNCiAgICB9DQoNCiAgICBsZXQgaW5wdXQgPSB7fTsNCg0KICAgIC8vIG9ubHkgYWNjZXB0cyB1cGRhdGUgZmllbGRzIGRlZmluZWQgaW4gc2NoZW1hLiBpZ25vcmUgb3RoZXJzDQogICAgZm9yIChsZXQgcHJvcGVydHkgaW4gdXBwZXJjYXNlX25hbWUuc2NoZW1hLm9iaikgew0KICAgICAgaWYgKHVwcGVyY2FzZV9uYW1lLnNjaGVtYS5vYmouaGFzT3duUHJvcGVydHkocHJvcGVydHkpICYmIHByb3BlcnR5IGluIHJlcS5ib2R5KSB7DQogICAgICAgIGlucHV0W3Byb3BlcnR5XSA9IHJlcS5ib2R5W3Byb3BlcnR5XTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoT2JqZWN0LmtleXMoaW5wdXQpLmxlbmd0aCA9PSAwKSB7DQogICAgICBsZXQgcGFyYW1FcnJvciA9IG5ldyBFcnJvcigiTm8gdXBkYXRlIGZpZWxkcyBwcm92aWRlZCIpOw0KICAgICAgbG9nZ2VyLmVycm9yKCJFcnJvciBpbnRvIHVwcGVyY2FzZV9uYW1lLnVwZGF0ZXVwcGVyY2FzZV9uYW1lKCk9PT0+IiwgcGFyYW1FcnJvcik7DQogICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDEpLmpzb24oew0KICAgICAgICBzdWNjZXNzOiB0cnVlLA0KICAgICAgICBtZXNzYWdlOiBwYXJhbUVycm9yLm1lc3NhZ2UsDQogICAgICAgIGVycm9yOiBwYXJhbUVycm9yDQogICAgICB9KTsNCiAgICB9DQoNCiAgICB1cHBlcmNhc2VfbmFtZS5maW5kT25lQW5kVXBkYXRlKHsgX2lkOiByZXEucGFyYW1zLl9pZCB9LCB7ICRzZXQ6IGlucHV0IH0sIGZ1bmN0aW9uKGVycm9yLCB1cGRhdGVkdXBwZXJjYXNlX25hbWUpIHsNCiAgICAgIGlmIChlcnJvcikgew0KICAgICAgICBsb2dnZXIuZXJyb3IoIkVycm9yIGludG8gdXBwZXJjYXNlX25hbWUudXBkYXRldXBwZXJjYXNlX25hbWUoY2IpPT09PiIsIGVycm9yKTsNCiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAxKS5qc29uKHsNCiAgICAgICAgICBzdWNjZXNzOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6ICJFcnJvciBpbiB1cGRhdGluZyBzZW50ZWNlY2FzZV9uYW1lIiwNCiAgICAgICAgICBlcnJvcjogZQ0KICAgICAgICB9KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7DQogICAgICAgICAgc3VjY2VzczogdHJ1ZSwNCiAgICAgICAgICBtZXNzYWdlOiAiVGhlIHNlbnRlY2VjYXNlX25hbWUgaGFzIGJlZW4gdXBkYXRlZCBzdWNjZXNzZnVsbHkhIiwNCiAgICAgICAgICBkYXRhOiB1cGRhdGVkdXBwZXJjYXNlX25hbWUNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSk7DQogIH0gY2F0Y2ggKGUpIHsNCiAgICBsb2dnZXIuZXJyb3IoIkVycm9yIGludG8gdXBwZXJjYXNlX25hbWUudXBkYXRldXBwZXJjYXNlX25hbWUoY2F0Y2gpPT09PiIsIGUpOw0KICAgIHJldHVybiByZXMuc3RhdHVzKDUwMSkuanNvbih7DQogICAgICBzdWNjZXNzOiB0cnVlLA0KICAgICAgbWVzc2FnZTogIlNvbWV0aGluZyB3ZW50IHdyb25nIiwNCiAgICAgIGVycm9yOiBlDQogICAgfSk7DQogIH0NCn07DQoNCmV4cG9ydCBjb25zdCBkZWxldGV1cHBlcmNhc2VfbmFtZSA9IChyZXEsIHJlcywgbmV4dCkgPT4gew0KICBsb2dnZXIuaW5mbygiUmVxdWVzdCBib2R5ID09PT4iLCByZXEuYm9keSk7DQogIHRyeSB7DQogICAgaWYgKCFyZXEucGFyYW1zLl9pZCkgew0KICAgICAgbGV0IHBhcmFtRXJyb3IgPSBuZXcgRXJyb3IoIk5vIGlkIHByb3ZpZGVkIik7DQogICAgICBsb2dnZXIuZXJyb3IoIkVycm9yIGludG8gdXBwZXJjYXNlX25hbWUuZGVsZXRldXBwZXJjYXNlX25hbWUoKT09PT4iLCBwYXJhbUVycm9yKTsNCiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMSkuanNvbih7DQogICAgICAgIHN1Y2Nlc3M6IHRydWUsDQogICAgICAgIG1lc3NhZ2U6IHBhcmFtRXJyb3IubWVzc2FnZSwNCiAgICAgICAgZXJyb3I6IHBhcmFtRXJyb3INCiAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8vIHJlY29yZCBpcyBhcmNoaXZlZCBpbnN0ZWFkIG9mIGRlbGV0ZWQNCiAgICB1cHBlcmNhc2VfbmFtZS5maW5kT25lQW5kVXBkYXRlKHsgX2lkOiByZXEucGFyYW1zLl9pZCB9LCB7ICRzZXQ6IHsgc3RhdHVzOiAiQXJjaGl2ZWQiIH0gfSwgZnVuY3Rpb24oZXJyb3IsIHVwZGF0ZWR1cHBlcmNhc2VfbmFtZSkgew0KICAgICAgaWYgKGVycm9yKSB7DQogICAgICAgIGxvZ2dlci5lcnJvcigiRXJyb3IgaW50byB1cHBlcmNhc2VfbmFtZS5kZWxldGV1cHBlcmNhc2VfbmFtZShjYik9PT0+IiwgZXJyb3IpOw0KICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDEpLmpzb24oew0KICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogIkVycm9yIGluIGRlbGV0aW5nIHNlbnRlY2VjYXNlX25hbWUiLA0KICAgICAgICAgIGVycm9yOiBlDQogICAgICAgIH0pOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsNCiAgICAgICAgICBzdWNjZXNzOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6ICJUaGUgc2VudGVjZWNhc2VfbmFtZSBoYXMgYmVlbiBkZWxldGVkIHN1Y2Nlc3NmdWxseSEiLA0KICAgICAgICAgIGRhdGE6IHVwZGF0ZWR1cHBlcmNhc2VfbmFtZQ0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9KTsNCiAgfSBjYXRjaCAoZSkgew0KICAgIGxvZ2dlci5lcnJvcigiRXJyb3IgaW50byB1cHBlcmNhc2VfbmFtZS5kZWxldGV1cHBlcmNhc2VfbmFtZShjYXRjaCk9PT0+IiwgZSk7DQogICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAxKS5qc29uKHsNCiAgICAgIHN1Y2Nlc3M6IHRydWUsDQogICAgICBtZXNzYWdlOiAiU29tZXRoaW5nIHdlbnQgd3JvbmciLA0KICAgICAgZXJyb3I6IGUNCiAgICB9KTsNCiAgfQ0KfTsNCg==";
  controllerFileData = new String(new Buffer(controllerFileData, "base64"));
  controllerFileData = controllerFileData.split("lowercase_name_plural").join(pluralize(lowerCaseName));
  controllerFileData = controllerFileData.split("uppercase_name_plural").join(pluralize(upperCaseName));
  controllerFileData = controllerFileData.split("sentececase_name_plural").join(pluralize(sentenceCaseName));
  controllerFileData = controllerFileData.split("lowercase_name").join(lowerCaseName);
  controllerFileData = controllerFileData.split("uppercase_name").join(upperCaseName);
  controllerFileData = controllerFileData.split("sentececase_name").join(sentenceCaseName);
  await fs.writeFileSync(newModuleBaseDir + "/controllers/index.js", controllerFileData);
}

async function createModel(newModuleBaseDir, lowerCaseName, upperCaseName, urlName, sentenceCaseName) {
  await fs.mkdirSync(newModuleBaseDir + "/models");
  let modelFileData =
    "aW1wb3J0IG1vbmdvb3NlIGZyb20gIm1vbmdvb3NlIjsNCmltcG9ydCB1bmlxdWVWYWxpZGF0b3IgZnJvbSAibW9uZ29vc2UtdW5pcXVlLXZhbGlkYXRvciI7DQppbXBvcnQgc2x1ZyBmcm9tICJzbHVnIjsNCmNvbnN0IFNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYTsNCg0KLy8gY3JlYXRlIGEgc2NoZW1hDQpjb25zdCBsb3dlcmNhc2VfbmFtZVNjaGVtYSA9IG5ldyBTY2hlbWEoDQogIHsNCiAgICB0aXRsZTogew0KICAgICAgdHlwZTogU3RyaW5nDQogICAgfSwNCiAgICBzbHVnOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBsb3dlcmNhc2U6IHRydWUsDQogICAgICB1bmlxdWU6IHRydWUNCiAgICB9LA0KICAgIHN0YXR1czogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZW51bTogWyJBY3RpdmUiLCAiQXJjaGl2ZWQiLCAiRGVsZXRlZCJdLA0KICAgICAgZGVmYXVsdDogIkFjdGl2ZSINCiAgICB9LA0KICAgIG1ldGFfZGF0YTogew0KICAgICAgdHlwZTogU2NoZW1hLlR5cGVzLk1peGVkDQogICAgfQ0KICB9LA0KICB7IHRpbWVzdGFtcHM6IHRydWUgfQ0KKTsNCg0KbG93ZXJjYXNlX25hbWVTY2hlbWEucGx1Z2luKHVuaXF1ZVZhbGlkYXRvciwgeyBtZXNzYWdlOiAiaXMgYWxyZWFkeSB0YWtlbiIgfSk7DQoNCmxvd2VyY2FzZV9uYW1lU2NoZW1hLnByZSgidmFsaWRhdGUiLCBmdW5jdGlvbihuZXh0KSB7DQogIHRoaXMuc2x1Z2lmeSgpOw0KICBuZXh0KCk7DQp9KTsNCg0KbG93ZXJjYXNlX25hbWVTY2hlbWEubWV0aG9kcy5zbHVnaWZ5ID0gZnVuY3Rpb24oKSB7DQogIHRoaXMuc2x1ZyA9IHNsdWcodGhpcy50aXRsZSk7DQp9Ow0KDQovLyBNaW5pbWFsIEpTT04gUmVzcG9uc2UgZm9yIFVzZXINCg0KbG93ZXJjYXNlX25hbWVTY2hlbWEubWV0aG9kcy50b0pTT05Gb3JVc2VyID0gZnVuY3Rpb24oKSB7DQogIGxldCB2YWx1ZSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMpOw0KDQogIC8vIFJlbW92ZSBmaWVsZHMgZnJvbSByZXR1cm4gdmFsdWUgaGVyZQ0KICBkZWxldGUgdmFsdWUuX2RvYy5faWQ7DQoNCiAgcmV0dXJuIHZhbHVlOw0KfTsNCg0KLy8gQ3VzdG9tIEpTT04gRm9yIEFkbWluaXN0cmF0b3INCg0KbG93ZXJjYXNlX25hbWVTY2hlbWEubWV0aG9kcy50b0pTT05Gb3JBZG1pbmlzdHJhdG9yID0gZnVuY3Rpb24oKSB7DQogIGxldCB2YWx1ZSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMpOw0KDQogIC8vIFJlbW92ZSBmaWVsZHMgZnJvbSByZXR1cm4gdmFsdWUgaGVyZQ0KDQogIHJldHVybiB2YWx1ZTsNCn07DQoNCi8vIHRoZSBzY2hlbWEgaXMgdXNlbGVzcyBzbyBmYXINCi8vIHdlIG5lZWQgdG8gY3JlYXRlIGEgbW9kZWwgdXNpbmcgaXQNCmNvbnN0IHVwcGVyY2FzZV9uYW1lID0gbW9uZ29vc2UubW9kZWwoInVwcGVyY2FzZV9uYW1lIiwgbG93ZXJjYXNlX25hbWVTY2hlbWEpOw0KDQovLyBtYWtlIHRoaXMgYXZhaWxhYmxlIGluIG91ciBhcHBsaWNhdGlvbnMNCmV4cG9ydCBkZWZhdWx0IHVwcGVyY2FzZV9uYW1lOw0K";
  modelFileData = new String(new Buffer(modelFileData, "base64"));
  modelFileData = modelFileData.split("lowercase_name").join(lowerCaseName);
  modelFileData = modelFileData.split("uppercase_name").join(upperCaseName);
  await fs.writeFileSync(newModuleBaseDir + "/models/index.js", modelFileData);
}

async function createRoute(newModuleBaseDir, lowerCaseName, upperCaseName, urlName, sentenceCaseName) {
  await fs.mkdirSync(newModuleBaseDir + "/routes");
  let routeFileData =
    "InVzZSBzdHJpY3QiOw0KaW1wb3J0IGV4cHJlc3MgZnJvbSAiZXhwcmVzcyI7DQppbXBvcnQgeyBnZXRBbGx1cHBlcmNhc2VfbmFtZV9wbHVyYWwsIGFkZE5ld3VwcGVyY2FzZV9uYW1lLCBnZXR1cHBlcmNhc2VfbmFtZSwgdXBkYXRldXBwZXJjYXNlX25hbWUsIGRlbGV0ZXVwcGVyY2FzZV9uYW1lIH0gZnJvbSAiLi4vY29udHJvbGxlcnMiOw0KY29uc3QgbG93ZXJjYXNlX25hbWVSb3V0ZXMgPSBleHByZXNzLlJvdXRlcigpOw0KDQpsb3dlcmNhc2VfbmFtZVJvdXRlcw0KICAucm91dGUoIi8iKQ0KICAvLyBnZXQgYWxsIHNlbnRlY2VjYXNlX25hbWVfcGx1cmFsIChhY2Nlc3NlZCBhdCBHRVQgaHR0cDovL2Jhc2UtdXJsL3VybGNhc2UpDQogIC5nZXQoZ2V0QWxsdXBwZXJjYXNlX25hbWVfcGx1cmFsKQ0KICAvLyBjcmVhdGUgYSBzZW50ZWNlY2FzZV9uYW1lIChhY2Nlc3NlZCBhdCBQT1NUIGh0dHA6Ly9iYXNlLXVybC91cmxjYXNlKQ0KICAucG9zdChhZGROZXd1cHBlcmNhc2VfbmFtZSk7DQoNCmxvd2VyY2FzZV9uYW1lUm91dGVzDQogIC5yb3V0ZSgiLzpfaWQiKQ0KICAvLyBnZXQgYSBzaW5nbGUgc2VudGVjZWNhc2VfbmFtZSAoYWNjZXNzZWQgYXQgR0VUIGh0dHA6Ly9iYXNlLXVybC91cmxjYXNlLzpfaWQpDQogIC5nZXQoZ2V0dXBwZXJjYXNlX25hbWUpDQogIC8vIHVwZGF0ZSBhIHNpbmdsZSBzZW50ZWNlY2FzZV9uYW1lIChhY2Nlc3NlZCBhdCBQVVQgaHR0cDovL2Jhc2UtdXJsL3VybGNhc2UvOl9pZCkNCiAgLnB1dCh1cGRhdGV1cHBlcmNhc2VfbmFtZSkNCiAgLy8gZGVsZXRlIGEgc2VudGVjZWNhc2VfbmFtZSAoYWNjZXNzZWQgYXQgREVMRVRFIGh0dHA6Ly9iYXNlLXVybC91cmxjYXNlLzpfaWQpDQogIC5kZWxldGUoZGVsZXRldXBwZXJjYXNlX25hbWUpOw0KDQovLyBBbmQgaGVyZSB0aGUgcGxhY2UgZm9yIGN1c3RvbSByb3V0ZSBhbmQgRW5kcG9pbnRzDQoNCmV4cG9ydCBkZWZhdWx0IGxvd2VyY2FzZV9uYW1lUm91dGVzOw0K";
  routeFileData = new String(new Buffer(routeFileData, "base64"));
  routeFileData = routeFileData.split("sentececase_name_plural").join(pluralize(sentenceCaseName));
  routeFileData = routeFileData.split("uppercase_name_plural").join(pluralize(upperCaseName));
  routeFileData = routeFileData.split("lowercase_name").join(lowerCaseName);
  routeFileData = routeFileData.split("uppercase_name").join(upperCaseName);
  routeFileData = routeFileData.split("sentececase_name").join(sentenceCaseName);
  routeFileData = routeFileData.split("urlcase").join(urlName);
  await fs.writeFileSync(newModuleBaseDir + "/routes/index.js", routeFileData);
}

async function createModule(dir, name) {
  spinner.start();
  let lowerCaseName = changeCase.camelCase(name);
  let upperCaseName = changeCase.pascalCase(name);
  let urlName = pluralize(changeCase.paramCase(name));
  let sentenceCaseName = changeCase.noCase(name);

  let newModuleBaseDir = dir + "/modules/" + urlName;
  await fs.mkdirSync(newModuleBaseDir);
  await createController(newModuleBaseDir, lowerCaseName, upperCaseName, urlName, sentenceCaseName);
  spinner.succeed("Sample Controllers created");
  await createModel(newModuleBaseDir, lowerCaseName, upperCaseName, urlName, sentenceCaseName);
  spinner.succeed("Sample Model created");
  await createRoute(newModuleBaseDir, lowerCaseName, upperCaseName, urlName, sentenceCaseName);
  spinner.succeed("Sample Routes created");
  spinner.succeed("Sample module created successfully");
}

module.exports = createModule;
